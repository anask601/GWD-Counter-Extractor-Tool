<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GWD Counter Extractor</title>
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🔍</text></svg>"
    />
    <link rel="stylesheet" href="styles.css" />
    <script src="script.js" defer></script>
  </head>

  <body>
    <div class="container">
      <div class="header">
        <button class="help-button" onclick="openModal()" title="How to use">
          ❓
        </button>
        <h1>GWD Counter Extractor</h1>
        <p>Extract gwd-counter elements from Google Web Designer HTML code</p>
      </div>

      <div class="main-content">
        <div class="input-section">
          <label for="htmlInput">Paste your GWD HTML code here:</label>
          <textarea
            id="htmlInput"
            placeholder="Paste your HTML code containing gwd-counter elements..."
          ></textarea>
        </div>

        <div class="button-group">
          <button class="extract-btn" onclick="extractCounters()">
            🔍 Extract Counters
          </button>
          <button
            class="copy-btn"
            onclick="copyToClipboard()"
            id="copyBtn"
            disabled
          >
            📋 Copy Result
          </button>
          <button class="clear-btn" onclick="clearAll()">🗑️ Clear All</button>
        </div>

        <div class="success-message" id="successMessage">
          ✅ Copied to clipboard successfully!
        </div>

        <div class="error-message" id="errorMessage">
          ❌ No gwd-counter elements found in the provided HTML.
        </div>

        <div class="nan-warning" id="nanWarning">
          ⚠️ <strong>Warning:</strong> Found counters with "NaN" values. These
          may cause tracking issues!
        </div>

        <div class="output-section">
          <div class="counter-info" id="counterInfo" style="display: none">
            <div class="counter-count" id="counterCount">Found 0 counters</div>
          </div>

          <label for="outputArea">Extracted Counters:</label>
          <div id="outputArea" class="counter-output" style="overflow-y: auto">
            Extracted gwd-counter elements will appear here...
          </div>
        </div>
      </div>
    </div>

    <!-- Help Modal -->
    <div class="modal-overlay" id="modalOverlay" onclick="closeModal()">
      <div class="modal" onclick="event.stopPropagation()">
        <div class="modal-header">
          <h2>🔍 How to Use GWD Counter Extractor</h2>
          <button class="modal-close" onclick="closeModal()">×</button>
        </div>
        <div class="modal-content">
          <div class="step">
            <h3>
              <span class="step-number">1</span>
              Get Your HTML Code
            </h3>
            <div class="step-content">
              <div class="instruction-group">
                <p class="main-instruction">
                  🌐 Navigate to your <strong>Local Preview</strong> or
                  <strong>Deploy Preview</strong> link
                </p>
                <p class="sub-instruction">
                  Open your Google Web Designer project preview in any browser
                </p>
              </div>

              <div class="instruction-group">
                <p class="main-instruction">
                  🔍 Open <strong>Developer Tools</strong>
                </p>
                <p class="sub-instruction">
                  Right-click anywhere → "Inspect" or press
                  <span class="keyboard-shortcut">F12</span>
                </p>
              </div>

              <div class="instruction-group">
                <p class="main-instruction">
                  🎯 Inspect the <code>.content__header__logo</code> element
                </p>
                <p class="sub-instruction">
                  Look for this element on the top-left side of your page
                </p>
              </div>

              <div class="instruction-group">
                <p class="main-instruction">📋 Find the main parent element</p>
                <p class="sub-instruction">
                  Look for either <code>&lt;body&gt;</code> or
                  <code>&lt;gwd-google-ad&gt;</code> tags
                </p>
              </div>

              <div class="code-examples">
                <p class="example-label">Expected counter formats:</p>
                <div class="code-example">
                  <span class="code-comment">// Standard GWD Counter</span
                  ><br />
                  &lt;gwd-counter id="counter1" type="timer"
                  duration="30"&gt;&lt;/gwd-counter&gt;
                </div>
                <div class="example-divider">OR</div>
                <div class="code-example">
                  <span class="code-comment"
                    >// Body tag with counter attributes</span
                  ><br />
                  &lt;body id="counter1" type="timer"
                  duration="30"&gt;&lt;/body&gt;
                </div>
              </div>

              <div class="video-container">
                <video
                  controls
                  poster="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 200'%3E%3Crect width='100%25' height='100%25' fill='%23f0f0f0'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%23999'%3EDemo Video%3C/text%3E%3C/svg%3E"
                >
                  <source src="gwd-extractor-video.mp4" type="video/mp4" />
                  Your browser does not support the video tag.
                </video>
                <p class="video-caption">
                  📹 Watch how to inspect and extract GWD counter elements
                </p>
              </div>
            </div>
          </div>

          <div class="step">
            <h3>
              <span class="step-number">2</span>
              Paste Your Code
            </h3>
            <div class="step-content">
              <div class="instruction-group">
                <p class="main-instruction">
                  📝 Paste HTML into the textarea above
                </p>
                <p class="sub-instruction">
                  The tool features <strong>auto-extract</strong> - it will
                  automatically process your code when you paste
                </p>
              </div>

              <div class="feature-highlight">
                <div class="feature-icon">⚡</div>
                <div class="feature-text">
                  <strong>Smart Processing:</strong> Paste entire HTML files -
                  our tool intelligently scans through all code to find
                  gwd-counter elements, no matter how large or complex your file
                  is.
                </div>
              </div>
            </div>
          </div>

          <div class="step">
            <h3>
              <span class="step-number">3</span>
              Extract Counters
            </h3>
            <div class="step-content">
              <div class="instruction-group">
                <p class="main-instruction">🚀 Start extraction process</p>
                <p class="sub-instruction">
                  Click <strong>"🔍 Extract Counters"</strong> or use
                  <span class="keyboard-shortcut">Ctrl + Enter</span>
                </p>
              </div>

              <div class="process-info">
                <h4 class="process-title">
                  🔧 What happens during extraction:
                </h4>
                <div class="process-list">
                  <div class="process-item">
                    <div class="process-icon">🔍</div>
                    <span>Scans your HTML for all gwd-counter elements</span>
                  </div>
                  <div class="process-item">
                    <div class="process-icon">📊</div>
                    <span>Counts and displays total found counters</span>
                  </div>
                  <div class="process-item">
                    <div class="process-icon">📋</div>
                    <span>Extracts clean counter code to output area</span>
                  </div>
                  <div class="process-item">
                    <div class="process-icon">⚠️</div>
                    <span>Detects potential NaN (Not a Number) issues</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="step">
            <h3>
              <span class="step-number">4</span>
              Copy Results
            </h3>
            <div class="step-content">
              <div class="instruction-group">
                <p class="main-instruction">
                  📋 Copy extracted counter elements
                </p>
                <p class="sub-instruction">
                  Use <strong>"📋 Copy Result"</strong> button to copy all
                  extracted elements to clipboard
                </p>
              </div>

              <div class="shortcut-info">
                <div class="shortcut-item">
                  <kbd class="keyboard-shortcut">Ctrl + C</kbd>
                  <span>Quick copy when output area is focused</span>
                </div>
              </div>

              <div class="feature-highlight">
                <div class="feature-icon">✨</div>
                <div class="feature-text">
                  <strong>Ready to Use:</strong> Copied elements are clean and
                  formatted - paste them directly into your project or
                  documentation.
                </div>
              </div>
            </div>
          </div>

          <div class="tips">
            <h4>💡 Advanced Features & Tips</h4>
            <div class="tips-grid">
              <div class="tip-item">
                <div class="tip-icon">⚡</div>
                <div class="tip-content">
                  <strong>Auto-paste extraction:</strong> The tool automatically
                  processes code the moment you paste it
                </div>
              </div>
              <div class="tip-item">
                <div class="tip-icon">🚨</div>
                <div class="tip-content">
                  <strong>NaN Detection:</strong> Yellow warning alerts appear
                  for counters with "NaN" values that could cause tracking
                  failures
                </div>
              </div>
              <div class="tip-item">
                <div class="tip-icon">📦</div>
                <div class="tip-content">
                  <strong>Batch Processing:</strong> Handle multiple gwd-counter
                  elements simultaneously from large HTML files
                </div>
              </div>
              <div class="tip-item">
                <div class="tip-icon">🧹</div>
                <div class="tip-content">
                  <strong>Clean Output:</strong> Extracts only essential counter
                  elements, removing all unnecessary surrounding code
                </div>
              </div>
              <div class="tip-item">
                <div class="tip-icon">📱</div>
                <div class="tip-content">
                  <strong>Mobile Optimized:</strong> Fully responsive design
                  works seamlessly on desktop, tablet, and mobile devices
                </div>
              </div>
            </div>
          </div>

          <div class="step">
            <h3>
              <span class="step-number">5</span>
              Troubleshooting
            </h3>
            <div class="step-content">
              <div class="troubleshoot-section">
                <div class="problem-item">
                  <div class="problem-icon">❌</div>
                  <div class="problem-content">
                    <strong>No counters found?</strong>
                    <p class="solution">
                      Ensure your HTML contains valid
                      <code>&lt;gwd-counter&gt;</code> elements. Check that
                      you've pasted the complete HTML structure, not just
                      fragments.
                    </p>
                  </div>
                </div>

                <div class="problem-item">
                  <div class="problem-icon">⚠️</div>
                  <div class="problem-content">
                    <strong>NaN warnings appearing?</strong>
                    <p class="solution">
                      Review your counter configurations in Google Web Designer.
                      Some duration or increment values may be undefined or
                      incorrectly set.
                    </p>
                  </div>
                </div>

                <div class="problem-item">
                  <div class="problem-icon">📋</div>
                  <div class="problem-content">
                    <strong>Can't copy results?</strong>
                    <p class="solution">
                      Verify extraction was successful first (green success
                      message should appear). If copy still fails, manually
                      select and copy from the output area.
                    </p>
                  </div>
                </div>

                <div class="problem-item">
                  <div class="problem-icon">🔧</div>
                  <div class="problem-content">
                    <strong>Tool not responding?</strong>
                    <p class="solution">
                      Try refreshing the page and paste smaller HTML sections.
                      Very large files (>1MB) may take a moment to process.
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
